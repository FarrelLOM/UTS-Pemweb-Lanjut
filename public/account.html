<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Akun Saya | PLN Energy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Tombol burger di pojok kiri -->
  <button class="menu-toggle" id="burgerBtn">â˜°</button>

  <!-- Sidebar kiri -->
  <div class="sidebar" id="sidebarMenu">
    <a href="shop.html" class="nav-link">ğŸ›’ Shop</a>
    <a href="cart.html" class="nav-link">ğŸ§º Keranjang</a>
    <a href="add-item.html" class="nav-link">â• Jual Produk</a>
    <a href="marketplace.html" class="nav-link">ğŸ› ï¸ Beli Alat</a>
    <a href="report.html" class="nav-link">ğŸ“£ Lapor</a>
    <a href="dashboard-user.html" class="nav-link">ğŸ“Š Energi</a>
    <a href="energy-dashboard.html" class="nav-link">ğŸ“Š Energi dashboard</a>
    <a href="topup.html" class="nav-link">ğŸ’° Top-Up</a>
    <a href="payout.html" class="nav-link">ğŸ’¸ Cairkan</a>
    <a href="mikrogrid-map.html" class="nav-link">ğŸ—ºï¸ Peta</a>
    <a href="news.html" class="nav-link">ğŸ“° Berita</a>
    <a href="kalkulator.html" class="nav-link">ğŸ§® Kalkulator</a>
    <a href="add-generator.html" class="nav-link">â• Tambah Generator</a>
  </div>

  <!-- Konten utama -->
  <div class="main-content">
    <h2>Informasi Akun</h2>
    <div class="account-info-wrapper">
      <div class="account-profile">
        <img id="fotoProfil" src="" alt="Foto Profil" />
        <div id="account-info"></div>
      </div>
      <div class="account-actions">
        <button onclick="logout()" class="button red">Logout</button>
        <button onclick="window.location.href='edit-account.html'">âœï¸ Edit Akun</button>
      </div>
    </div>
    <div class="account-balance">
      <h3>Saldo Dompet Digital & Energi Mandiri</h3>
      <p id="saldoText">Rp -</p>
      <div class="balance-actions">
        <button onclick="window.location.href='topup.html'">Top-Up Saldo</button>
        <button onclick="location.href='payout.html'">ğŸ’¸ Cairkan Saldo</button>
        <button onclick="window.location.href='add-generator.html'">â• Tambah Generator</button>
        <button onclick="window.location.href='dashboard-user.html'">ğŸ“Š Dashboard Energi</button>
      </div>
    </div>
    <hr />

    <h1>Selamat Datang di PowerConnect</h1>
    <p>
      <strong>PowerConnect</strong> adalah platform digital terintegrasi yang dirancang untuk menghubungkan masyarakat dengan sumber energi terbarukan secara transparan, mudah, dan modern. Kami membuka akses terhadap investasi energi bersih, pembelian energi hijau, serta informasi terbaru tentang perkembangan energi terbarukan di Indonesia.
    </p>
    <p>
      Website ini menyediakan fitur <strong>ewallet</strong> untuk top-up, pembelian energi, dan investasi langsung. Juga tersedia peta interaktif berbasis <strong>Leaflet.js</strong> dan grafik investasi real-time dengan <strong>Chart.js</strong>.
    </p>
    <p>
      Pengguna dapat berdiskusi melalui sistem komentar bertingkat dan mengelola akun dengan aman. Admin dapat memverifikasi transaksi dan mengelola berita.
    </p>
    <p>
      <strong>Project UTS PWL oleh Farrel Laogi Murrjitama - 202231096</strong>
    </p>
    <img src="uploads\pas foto merah.png" alt="Creator" />
    <hr />
  </div>

  <script src="js/main.js"></script>
  <script>
    // Sidebar burger menu logic
    const burgerBtn = document.getElementById('burgerBtn');
    const sidebar = document.getElementById('sidebarMenu');
    burgerBtn.addEventListener('click', () => {
      sidebar.classList.toggle('active');
    });
    // Optional: close sidebar when clicking outside (on mobile)
    document.addEventListener('click', function(e) {
      if (window.innerWidth <= 600) {
        if (!sidebar.contains(e.target) && e.target !== burgerBtn) {
          sidebar.classList.remove('active');
        }
      }
    });

    document.addEventListener('DOMContentLoaded', () => {
      fetch('/account')
        .then(res => res.json())
        .then(user => {
          const container = document.getElementById('account-info');
          container.innerHTML = `
            <p><strong>Username:</strong> ${user.username}</p>
            <p><strong>Email:</strong> ${user.email}</p>
          `;

          const fotoElement = document.getElementById('fotoProfil');
          if (user.image) {
            fotoElement.src = user.image; // âœ… gunakan URL langsung dari Cloudinary
          } else {
            fotoElement.src = 'https://via.placeholder.com/100?text=User';
          }
        })
        .catch(err => {
          console.error("âŒ Gagal ambil data akun:", err);
        });
    });
    document.addEventListener('DOMContentLoaded', () => {
      fetch('/account')
        .then(res => res.json())
        .then(user => {
          const container = document.getElementById('saldoText');
          container.innerHTML = `
            <p><strong>Rp.</strong> ${user.saldo}</p>
          `;
        })
        .catch(err => {
          console.error("âŒ Gagal ambil data akun:", err);
        });
    });
  </script>
  <style>
    /* Tambahan agar tampilan lebih rapi */
    .account-info-wrapper {
      display: flex;
      flex-wrap: wrap;
      align-items: flex-start;
      gap: 32px;
      margin-bottom: 18px;
    }
    .account-profile {
      display: flex;
      align-items: center;
      gap: 18px;
    }
    #fotoProfil {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid #ccc;
      background: #f4f4f4;
    }
    .account-actions {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-left: 24px;
    }
    .account-balance {
      margin-bottom: 18px;
    }
    .balance-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 8px;
    }
    @media (max-width: 700px) {
      .account-info-wrapper {
        flex-direction: column;
        gap: 18px;
      }
      .account-actions {
        flex-direction: row;
        gap: 10px;
        margin-left: 0;
      }
      .balance-actions {
        flex-direction: column;
        gap: 8px;
      }
    }
  </style>
</body>
</html>