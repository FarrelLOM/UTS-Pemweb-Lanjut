<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Akun Saya | PLN Energy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Tombol burger di pojok kanan atas -->
  <button class="menu-toggle" id="burgerBtn">☰</button>

  <!-- Sidebar kanan -->
  <div class="sidebar" id="sidebarMenu">
    <a href="shop.html" class="nav-link">🛒 Shop</a>
    <a href="cart.html" class="nav-link">🧺 Keranjang</a>
    <a href="add-item.html" class="nav-link">➕ Jual Produk</a>
    <a href="marketplace.html" class="nav-link">🛠️ Beli Alat</a>
    <a href="report.html" class="nav-link">📣 Lapor</a>
    <a href="dashboard-user.html" class="nav-link">📊 Energi</a>
    <a href="energy-dashboard.html" class="nav-link">📊 Energi dashboard</a>
    <a href="topup.html" class="nav-link">💰 Top-Up</a>
    <a href="payout.html" class="nav-link">💸 Cairkan</a>
    <a href="mikrogrid-map.html" class="nav-link">🗺️ Peta</a>
    <a href="news.html" class="nav-link">📰 Berita</a>
    <a href="kalkulator.html" class="nav-link">🧮 Kalkulator</a>
    <a href="add-generator.html" class="nav-link">➕ Tambah Generator</a>
  </div>

  <!-- Konten utama -->
  <div class="main-content">
    <h2>Informasi Akun</h2>
    <div class="account-info-wrapper">
      <div class="account-profile">
        <img id="fotoProfil" src="" alt="Foto Profil" style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 2px solid #ccc;"/>
        <div id="account-info"></div>
      </div>
      <div class="account-actions">
        <button onclick="logout()" class="button red">Logout</button>
        <button onclick="window.location.href='edit-account.html'">✏️ Edit Akun</button>
      </div>
    </div>
    <div class="account-balance">
      <h3>Saldo Dompet Digital & Energi Mandiri</h3>
      <p id="saldoText">Rp -</p>
      <div class="balance-actions">
        <button onclick="window.location.href='topup.html'">Top-Up Saldo</button>
        <button onclick="location.href='payout.html'">💸 Cairkan Saldo</button>
        <button onclick="window.location.href='add-generator.html'">➕ Tambah Generator</button>
        <button onclick="window.location.href='dashboard-user.html'">📊 Dashboard Energi</button>
      </div>
    </div>
    <hr />

    <h1>Selamat Datang di PowerConnect</h1>
    <p>
      <strong>PowerConnect</strong> adalah platform digital terintegrasi yang dirancang untuk menghubungkan masyarakat dengan sumber energi terbarukan secara transparan, mudah, dan modern. Kami membuka akses terhadap investasi energi bersih, pembelian energi hijau, serta informasi terbaru tentang perkembangan energi terbarukan di Indonesia.
    </p>
    <p>
      Website ini menyediakan fitur <strong>ewallet</strong> untuk top-up, pembelian energi, dan investasi langsung. Juga tersedia peta interaktif berbasis <strong>Leaflet.js</strong> dan grafik investasi real-time dengan <strong>Chart.js</strong>.
    </p>
    <p>
      Pengguna dapat berdiskusi melalui sistem komentar bertingkat dan mengelola akun dengan aman. Admin dapat memverifikasi transaksi dan mengelola berita.
    </p>
    <p>
      <strong>Project UTS PWL oleh Farrel Laogi Murrjitama - 202231096</strong>
    </p>
    <img src="uploads\pas foto merah.png" alt="Creator" style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 2px solid #ccc;"/>
    <hr />
    <button onclick="window.location.href='https://github.com/FarrelLOM/UTS-Pemweb-Lanjut.git'">Link github ⭐</button>
  </div>

  <script src="js/main.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      fetch('/account')
        .then(res => res.json())
        .then(user => {
          const container = document.getElementById('account-info');
          container.innerHTML = `
            <p><strong>Username:</strong> ${user.username}</p>
            <p><strong>Email:</strong> ${user.email}</p>
          `;

          const fotoElement = document.getElementById('fotoProfil');
          if (user.image) {
            fotoElement.src = user.image;
          } else {
            fotoElement.src = 'https://via.placeholder.com/100?text=User';
          }
        })
        .catch(err => {
          console.error("❌ Gagal ambil data akun:", err);
        });
    });
    document.addEventListener('DOMContentLoaded', () => {
      fetch('/account')
        .then(res => res.json())
        .then(user => {
          const container = document.getElementById('saldoText');
          container.innerHTML = `
            <p><strong>Rp.</strong> ${user.saldo}</p>
          `;
        })
        .catch(err => {
          console.error("❌ Gagal ambil data akun:", err);
        });
    });
  </script>
</body>
</html>